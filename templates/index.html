<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Stock Market Analysis</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* --- Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

        body {
            background: radial-gradient(circle at top, #0f0c29, #302b63, #24243e);
            color: #fff;
            font-family: 'Orbitron', sans-serif;
            min-height: 100vh;
        }

        /* --- Form Labels Neon --- */
        .form-label {
            color: #0ff;
            /* Neon cyan for labels */
            text-shadow: 0 0 5px #0ff;
            font-weight: 600;
        }


        /* --- Headings --- */
        h1,
        h2,
        h3,
        h4 {
            text-shadow:
                0 0 5px #0ff,
                0 0 10px #0ff,
                0 0 20px #0ff;
        }

        /* --- Neon Glowing Cards --- */
        .card {
            border-radius: 15px;
            overflow: hidden;
            background: rgba(20, 20, 30, 0.85);
            border: 1px solid #0ff;
            box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: scale(1.01);
            box-shadow: 0 0 20px #0ff, 0 0 40px #0ff;
        }

        /* --- Neon Buttons --- */
        .btn-primary {
            background: linear-gradient(45deg, #ff00ff, #0ff);
            border: none;
            color: #fff;
            font-weight: bold;
            text-shadow: 0 0 5px #fff;
            box-shadow: 0 0 10px #ff00ff, 0 0 20px #0ff;
            transition: all 0.3s ease-in-out;
        }

        .btn-primary:hover {
            transform: scale(1.05) rotate(-1deg);
            box-shadow: 0 0 20px #ff00ff, 0 0 30px #0ff, 0 0 50px #ff00ff;
        }

        /* --- Inputs --- */
        .form-control,
        .form-select {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #0ff;
            color: #fff;
            text-shadow: 0 0 2px #0ff;
        }

        .form-control:focus,
        .form-select:focus {
            background: rgba(0, 0, 0, 0.8);
            border-color: #ff00ff;
            box-shadow: 0 0 10px #ff00ff;
            color: #fff;
        }

        /* --- Neon Tables --- */
        .table {
            background: rgba(0, 0, 0, 0.85);
            color: #0ff;
            border: 1px solid #0ff;
        }

        .table thead {
            background: linear-gradient(90deg, #ff00ff, #0ff);
            color: #fff;
        }

        .table tbody tr:hover {
            background: rgba(255, 0, 255, 0.2);
        }

        /* --- Neon Image Glow --- */
        .chart-card img {
            border-radius: 10px;
            box-shadow: 0 0 20px #ff00ff, 0 0 40px #ff00ff;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .chart-card img:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px #ff00ff, 0 0 60px #ff00ff;
        }

        /* --- Scroll Animation --- */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease-out;
        }

        .fade-in.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Misc --- */
        .text-warning {
            color: #ff00ff !important;
            text-shadow: 0 0 5px #ff00ff;
        }
    </style>
</head>

<body>
   
    <div class="container py-5">

         <div class="text-end mb-3">
    <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm">ðŸšª Logout</a>
</div>

        <!-- Title -->
        <h1 class="text-center mb-5">ðŸ’¹ Stock Market Analysis & Prediction</h1>

        <!-- Input Form -->
        <div class="card shadow p-4 mb-4">
            <form method="post">
                <div class="mb-3">
                    <label class="form-label">Choose a Stock:</label>
                    <select class="form-select" name="ticker" required>
                        {% for name, symbol in stocks.items() %}
                        <option value="{{ symbol }}">{{ name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        <label class="form-label">Start Date:</label>
                        <input type="date" class="form-control" name="start" required>
                    </div>
                    <div class="col">
                        <label class="form-label">End Date:</label>
                        <input type="date" class="form-control" name="end" required>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary w-100">ðŸš€ Fetch Data</button>
            </form>
        </div>

        <!-- Stock Data Table -->
        {% if data %}
        <div class="card shadow p-4 mb-4">
            <h4 class="mb-3">ðŸ“Š Stock Data (Last 100 Records)</h4>
            <div class="table-responsive">
                {{ data | safe }}
            </div>
        </div>
        {% endif %}

        <!-- Stock Chart -->
        {% if img %}
        <div class="card shadow p-4 chart-card mb-4">
            <h4 class="mb-3">ðŸ“‰ Price Trend</h4>
            <img src="data:image/png;base64,{{ img }}" class="img-fluid">
        </div>
        {% endif %}

        <!-- Stock Prediction -->
        {% if prediction %}
        <div class="card shadow p-4 mb-4">
            <h4 class="mb-3">ðŸ”® Stock Price Prediction</h4>

            <!-- Neon styled prediction -->
            <p style="color: #00ffff; 
              text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff, 0 0 20px #00ffff; 
              font-weight: bold; 
              font-size: 1.2rem;">
                Predicted Next Day Price:
            </p>

            <!-- Display both USD and INR -->
            {% set usd = prediction | float %}
            {% set inr = usd * 83.25 %}
            <h3 class="mt-2 text-warning">
                ðŸ’µ USD: <b>${{ "%.2f"|format(usd) }}</b>
                <br>
                ðŸ‡®ðŸ‡³ INR: <b>â‚¹{{ "%.2f"|format(inr) }}</b>
            </h3>
        </div>
        {% endif %}

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>